(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function j(s){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s,{once:!0}):s()}async function A(s){const t=await fetch(s,{headers:{"Content-Type":"text/html"}});if(!t.ok)throw new Error(`Failed to load ${s}`);return t.text()}async function q(s){const t=await fetch(s,{headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Failed to load ${s}`);return t.json()}function C(s){const t=document.createElement("template");return t.innerHTML=s.trim(),t.content}function a(s,t={},i=[]){const e=document.createElement(s);return Object.entries(t||{}).forEach(([o,c])=>{o==="class"?e.className=c:o==="style"&&c&&typeof c=="object"?Object.entries(c).forEach(([h,r])=>e.style.setProperty(h,String(r))):o in e?e[o]=c:e.setAttribute(o,String(c))}),(Array.isArray(i)?i:[i]).forEach(o=>{o!=null&&e.append(o instanceof Node?o:document.createTextNode(String(o)))}),e}class N{constructor(t,i="data/sections.json"){this.container=t,this.src=i}ensureSectionStructure(t,i){try{const e=t.querySelector("section");if(!e)return t;if(i?.id&&!e.id&&(e.id=i.id),!!!e.querySelector(":scope > .container")){const o=document.createElement("div");for(o.className="container";e.firstChild;)o.appendChild(e.firstChild);e.appendChild(o)}return t}catch{return t}}async insertSection(t){if(t)try{let i=null;if(t.src){const e=await A(t.src);i=C(e);const n=i.querySelector("section");n&&t.id&&!n.id&&(n.id=t.id)}else if(t.template){const e=await A(t.template);i=this.ensureSectionStructure(C(e),t)}else if(t.html)i=this.ensureSectionStructure(C(t.html),t);else{console.warn("[sections] skip item without src/template/html",t);return}this.container.appendChild(i)}catch(i){const e=t.src||t.template||"[inline html]";console.warn("[sections] failed to load",e,i)}}async load(){try{const t=await q(this.src),i=Array.isArray(t)?t:t.sections||[];for(const e of i)await this.insertSection(e)}catch(t){console.warn("[sections] cannot load configuration",this.src,t)}}}const x={website:"icons/globe.svg",github:"icons/github.svg",repo:"icons/github.svg"};function S(s){return s.title||s.name||"Project"}function T(s){return s.summary||s.description||""}function B(s){if(s.thumbnail)return{src:s.thumbnail,alt:S(s)};const t=s.images&&s.images[0]||null;return t||(s.image?{src:s.image,alt:S(s)}:null)}function k(s){return s&&(!s.icon&&s.type&&x[s.type]&&(s.icon=x[s.type]),!s.label&&s.type&&(s.label=s.type.charAt(0).toUpperCase()+s.type.slice(1)),s)}class b{static cardFromProject(t){const i=a("div",{class:"no-blinking-curser project-card",draggable:"false"}),e=B(t),n=a("img",{src:e?.src||"assets/Wow-gif.gif",alt:e?.alt||S(t)||"Preview",draggable:"false"}),o=a("h3",{},S(t)),c=a("time",{},t.time||""),h=a("p",{},T(t)),r=a("div",{class:"description"},[o,c,h]),l=a("div",{class:"no-copy skill-list"},(t.skills||[]).map(y=>a("div",{class:"item",draggable:"false"},y))),p=a("div",{class:"no-copy card-footer"},(t.links||[]).map(y=>{const m=k(y),L=a("a",{class:"link",href:m.href||"#",title:m.title||m.label||"",draggable:"false"},[m.icon?a("img",{src:m.icon,alt:m.label||"",draggable:"false"}):null," "+(m.label||"Link")]);return m.target&&(L.target=m.target),L})),f=a("template",{class:"project-detail"}),d=a("div",{class:"images"},(t.images||[]).map(y=>{const m={src:y.src,alt:y.alt||""};return y.caption&&(m["data-caption"]=y.caption),a("img",m)})),u=a("div",{class:"skills"},(t.skills||[]).map(y=>a("span",{},y))),g=a("div",{class:"links"},(t.links||[]).map(y=>{const m=k(y);return a("a",{href:m.href||"#",title:m.title||m.label||""},m.label||"Link")})),E=a("div",{class:"info"},[a("h3",{},S(t)),a("time",{},t.time||""),a("p",{},t.description||t.summary||""),u,g]),I=a("div",{class:"detail"},[d,E]);return f.content.appendChild(I),t.id&&(i.dataset.id=t.id),t.tags&&t.tags.length&&(i.dataset.tags=t.tags.join(",")),i.append(n,r,l,p,f),i}static applyWidgetStyles(t,i){i&&Object.entries(i).forEach(([e,n])=>t.style.setProperty(e,n))}static renderGallery(t,i){(i||[]).forEach(e=>t.appendChild(b.cardFromProject(e)))}static async loadAndRender(t,i){const e=await q(i),n=Array.isArray(e)?e:e.projects||[],o=e.styles||e.widgetStyles||null;b.applyWidgetStyles(t,o||void 0);const c=(t.getAttribute("data-filter-tag")||t.getAttribute("data-projects-filter-tag")||"").toLowerCase().trim(),h=c?(n||[]).filter(r=>(r.tags||[]).map(l=>l.toLowerCase()).includes(c)):n;b.renderGallery(t,h)}static initAuto(){const t=document.getElementById("project-gallery-json");t&&b.loadAndRender(t,"data/projects.json"),document.querySelectorAll("[data-projects-src]").forEach(i=>{const e=i.getAttribute("data-projects-src");e&&b.loadAndRender(i,e)})}}function w(s){if(s)for(;s.firstChild;)s.removeChild(s.firstChild)}class F{constructor(t){this.modal=t,this.init()}currentIndex=0;images=[];lastFocus=null;defaultDescription="";get els(){return{dlg:this.modal.querySelector(".modal__dialog"),titleEl:this.modal.querySelector("#project-modal-title"),timeEl:this.modal.querySelector(".modal__time"),descEl:this.modal.querySelector(".modal__desc"),skillsEl:this.modal.querySelector(".modal__skills"),linksEl:this.modal.querySelector(".modal__links"),viewport:this.modal.querySelector(".gallery__viewport"),track:this.modal.querySelector(".gallery__track"),prevBtn:this.modal.querySelector(".gallery__prev"),nextBtn:this.modal.querySelector(".gallery__next"),captionEl:this.modal.querySelector(".gallery__caption"),closeBtn:this.modal.querySelector(".modal__close")}}setGallery(t){if(!this.images.length)return;this.currentIndex=Math.max(0,Math.min(t,this.images.length-1));const i=-this.currentIndex*100;this.els.track.style.transform=`translateX(${i}%)`;const e=this.images.length>1?"visible":"hidden";this.els.prevBtn.style.visibility=e,this.els.nextBtn.style.visibility=e;const n=this.images[this.currentIndex]?.caption||"";this.els.captionEl&&(this.els.captionEl.textContent=n,this.els.captionEl.style.display=n?"block":"none"),this.els.descEl&&(this.els.descEl.textContent=n||this.defaultDescription||"")}fillFromData(t){const{titleEl:i,timeEl:e,descEl:n,skillsEl:o,linksEl:c,track:h}=this.els;i.textContent=t.title||t.name||"Project",e.textContent=t.time||"",this.defaultDescription=t.description||t.summary||"",n.textContent=this.defaultDescription,w(o),(t.skills||[]).forEach(r=>{const l=document.createElement("div");l.className="item",l.textContent=r,o.appendChild(l)}),w(c),(t.links||[]).forEach(r=>{const l=document.createElement("a");l.className="link",l.href=r.href||"#",l.title=r.title||r.label||"";const p={website:"icons/globe.svg",github:"icons/github.svg",repo:"icons/github.svg"};if(!r.icon&&r.type&&p[r.type]&&(r.icon=p[r.type]),r.target&&(l.target=r.target),r.icon){const f=document.createElement("img");f.src=r.icon,f.alt=r.label||"",f.setAttribute("draggable","false"),l.appendChild(f)}l.appendChild(document.createTextNode(" "+(r.label||(r.type?r.type[0].toUpperCase()+r.type.slice(1):"Link")))),c.appendChild(l)}),this.images=[],w(h),(t.images||[]).forEach(({src:r,alt:l,caption:p})=>{if(!r)return;const f=document.createElement("img");f.className="gallery__img",f.loading="lazy",f.src=r,f.alt=l||"",h.appendChild(f),this.images.push({src:r,alt:l,caption:p})}),this.setGallery(0)}openFromCard(t){const{titleEl:i,timeEl:e,descEl:n,skillsEl:o,linksEl:c,track:h}=this.els,r=t.querySelector(".description h3"),l=t.querySelector(".description time"),p=t.querySelector(".description p");if(i.textContent=r?(r.textContent||"").trim():"Project",e.textContent=l?(l.textContent||"").trim():"",p){const d=p.cloneNode(!0);d.querySelectorAll("a").forEach(u=>u.remove()),this.defaultDescription=(d.textContent||"").trim(),n.textContent=this.defaultDescription}else this.defaultDescription="",n.textContent="";w(o),t.querySelectorAll(".skill-list .item").forEach(d=>{const u=document.createElement("div");u.className="item",u.textContent=(d.textContent||"").trim(),o.appendChild(u)}),w(c),t.querySelectorAll(".card-footer a").forEach(d=>{const u=document.createElement("a");u.className="link",u.href=d.getAttribute("href")||"#",u.title=d.getAttribute("title")||"",u.target=d.target||"";const g=d.querySelector("img");if(g){const E=document.createElement("img");E.src=g.getAttribute("src")||"",E.alt=g.getAttribute("alt")||"",E.setAttribute("draggable","false"),u.appendChild(E)}u.appendChild(document.createTextNode(" "+(d.textContent||"").trim())),c.appendChild(u)}),this.images=[],w(h);const f=t.querySelector("template.project-detail");if(f&&f.content.cloneNode(!0).querySelectorAll("img").forEach(g=>{this.images.push({src:g.getAttribute("src")||"",alt:g.getAttribute("alt")||"",caption:g.getAttribute("data-caption")||""})}),!this.images.length){const d=t.querySelector("img");d&&this.images.push({src:d.getAttribute("src")||"",alt:d.getAttribute("alt")||""})}this.images.forEach(({src:d,alt:u})=>{const g=document.createElement("img");g.className="gallery__img",g.loading="lazy",g.src=d,g.alt=u||"",h.appendChild(g)}),this.setGallery(0),this.lastFocus=document.activeElement,document.body.classList.add("modal-open"),this.modal.hidden=!1,this.modal.setAttribute("aria-hidden","false"),this.els.closeBtn.focus()}open(t){this.fillFromData(t||{}),this.lastFocus=document.activeElement,document.body.classList.add("modal-open"),this.modal.hidden=!1,this.modal.setAttribute("aria-hidden","false"),this.els.closeBtn.focus()}close(){this.modal.hidden=!0,this.modal.setAttribute("aria-hidden","true"),document.body.classList.remove("modal-open");const t=this.lastFocus;t&&typeof t.focus=="function"&&t.focus()}init(){const{prevBtn:t,nextBtn:i,closeBtn:e,viewport:n}=this.els;t?.addEventListener("click",()=>this.setGallery(this.currentIndex-1)),i?.addEventListener("click",()=>this.setGallery(this.currentIndex+1)),n?.addEventListener("click",o=>{const c=n.getBoundingClientRect();o.clientX-c.left<c.width/2?this.setGallery(this.currentIndex-1):this.setGallery(this.currentIndex+1)}),e?.addEventListener("click",()=>this.close()),this.modal.addEventListener("click",o=>{o.target===this.modal&&this.close()}),document.addEventListener("keydown",o=>{this.modal.hidden||(o.key==="Escape"&&this.close(),o.key==="ArrowLeft"&&this.setGallery(this.currentIndex-1),o.key==="ArrowRight"&&this.setGallery(this.currentIndex+1))}),document.addEventListener("click",o=>{const c=o.target,h=c&&c.closest(".project-card > img");if(h){o.preventDefault();const l=h.closest(".project-card");l&&this.openFromCard(l);return}const r=c&&c.closest("a.details-trigger");if(r){o.preventDefault();const l=r.closest(".project-card");l&&this.openFromCard(l)}})}}function _(){const s=Array.from(document.querySelectorAll(".section"));if(!s.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){s.forEach(i=>i.classList.add("in-view"));return}if("IntersectionObserver"in window){const i=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&n.intersectionRatio>.15?n.target.classList.add("in-view"):n.target.classList.remove("in-view")})},{threshold:[0,.15,.4,.75]});s.forEach(e=>i.observe(e))}else{const i=()=>{const e=window.innerHeight||document.documentElement.clientHeight;s.forEach(n=>{const o=n.getBoundingClientRect(),c=o.top<e*.85&&o.bottom>e*.15;n.classList.toggle("in-view",c)})};window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",i),i()}}function O(){const s=document.querySelector("nav");if(!s)return;let t=window.scrollY;const i=4,e=document.querySelector("header.hero"),n=()=>{if(!e)return window.scrollY<=0;const l=s.offsetHeight||0,p=Math.max(0,e.offsetHeight-l);return window.scrollY<=p},o=()=>{s.classList.remove("nav--hidden")},c=()=>{s.classList.add("nav--hidden")},h=()=>{const l=window.scrollY,p=l-t;n()||p<0?o():p>i&&c(),t=l};window.addEventListener("scroll",h,{passive:!0}),s.addEventListener("mouseenter",o),s.addEventListener("focusin",o),window.addEventListener("wheel",l=>{l.deltaY<0&&o()},{passive:!0});let r=0;window.addEventListener("touchstart",l=>{r=l.touches?.[0]?.clientY||0},{passive:!0}),window.addEventListener("touchmove",l=>{(l.touches?.[0]?.clientY||0)>r+2&&o()},{passive:!0}),o()}class v{static ensureMarkup(){let t=document.getElementById("tools-grid");return t||(t=document.createElement("div"),t.id="tools-grid",t.className="tools-grid",t.innerHTML=`
        <button type="button" class="tbtn tbtn-top" title="Go to top" aria-label="Go to top"><img alt="" src="icons/arrow-up.svg"/></button>
        <button type="button" class="tbtn tbtn-theme" title="Toggle theme" aria-label="Toggle theme"><img alt=""/></button>
      `,document.body.appendChild(t)),t}static applyThemeIcon(t){const i=document.body.classList.contains("theme-light"),e=t.querySelector("img");e&&(e.src=i?"icons/moon.svg":"icons/sun.svg"),t.title=i?"Switch to dark theme":"Switch to light theme",t.setAttribute("aria-label",t.title)}static setTheme(t){t==="light"?document.body.classList.add("theme-light"):document.body.classList.remove("theme-light");try{localStorage.setItem("theme",t)}catch{}}static initAuto(){const t=v.ensureMarkup(),i=t.querySelector(".tbtn-top"),e=t.querySelector(".tbtn-theme");try{const n=localStorage.getItem("theme");(n==="light"||n==="dark")&&v.setTheme(n)}catch{}e&&v.applyThemeIcon(e),i?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),e?.addEventListener("click",()=>{const n=document.body.classList.contains("theme-light");v.setTheme(n?"dark":"light"),e&&v.applyThemeIcon(e)})}}j(async()=>{const s=document.getElementById("y");s&&(s.textContent=String(new Date().getFullYear()));const t=document.getElementById("app-main");if(t){const e=t.getAttribute("data-sections-src")||"data/sections.json";await new N(t,e).load()}_(),O(),v.initAuto(),b.initAuto();const i=document.getElementById("project-modal");if(i){const e=new F(i);window.ProjectModal={open:n=>e.open(n)}}});
