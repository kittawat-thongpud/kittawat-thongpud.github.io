(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();function k(r){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r,{once:!0}):r()}async function S(r){const e=await fetch(r,{headers:{"Content-Type":"text/html"}});if(!e.ok)throw new Error(`Failed to load ${r}`);return e.text()}async function C(r){const e=await fetch(r,{headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to load ${r}`);return e.json()}function v(r){const e=document.createElement("template");return e.innerHTML=r.trim(),e.content}function o(r,e={},s=[]){const t=document.createElement(r);return Object.entries(e||{}).forEach(([n,l])=>{n==="class"?t.className=l:n==="style"&&l&&typeof l=="object"?Object.entries(l).forEach(([p,c])=>t.style.setProperty(p,String(c))):n in t?t[n]=l:t.setAttribute(n,String(l))}),(Array.isArray(s)?s:[s]).forEach(n=>{n!=null&&t.append(n instanceof Node?n:document.createTextNode(String(n)))}),t}class L{constructor(e,s="data/sections.json"){this.container=e,this.src=s}ensureSectionStructure(e,s){try{const t=e.querySelector("section");if(!t)return e;if(s?.id&&!t.id&&(t.id=s.id),!!!t.querySelector(":scope > .container")){const n=document.createElement("div");for(n.className="container";t.firstChild;)n.appendChild(t.firstChild);t.appendChild(n)}return e}catch{return e}}async insertSection(e){if(e)try{let s=null;if(e.src){const t=await S(e.src);s=v(t);const i=s.querySelector("section");i&&e.id&&!i.id&&(i.id=e.id)}else if(e.template){const t=await S(e.template);s=this.ensureSectionStructure(v(t),e)}else if(e.html)s=this.ensureSectionStructure(v(e.html),e);else{console.warn("[sections] skip item without src/template/html",e);return}this.container.appendChild(s)}catch(s){const t=e.src||e.template||"[inline html]";console.warn("[sections] failed to load",t,s)}}async load(){try{const e=await C(this.src),s=Array.isArray(e)?e:e.sections||[];for(const t of s)await this.insertSection(t)}catch(e){console.warn("[sections] cannot load configuration",this.src,e)}}}class g{static cardFromProject(e){const s=o("div",{class:"no-blinking-curser project-card",draggable:"false"}),t=e.images&&e.images[0]||null,i=o("img",{src:t?.src||e.image||"assets/Wow-gif.gif",alt:t?.alt||e.title||"Preview",draggable:"false"}),n=o("h3",{},e.title||"Project"),l=o("time",{},e.time||""),p=o("p",{},e.description||""),c=o("a",{href:"#",class:"details-trigger",draggable:"false"},"Details");p.append(" ",c);const m=o("div",{class:"description"},[n,l,p]),h=o("div",{class:"no-copy skill-list"},(e.skills||[]).map(a=>o("div",{class:"item"},a))),b=o("div",{class:"no-copy card-footer"},(e.links||[]).map(a=>{const w=o("a",{class:"link",href:a.href||"#",title:a.title||a.label||""},[a.icon?o("img",{src:a.icon,alt:a.label||""}):null," "+(a.label||"Link")]);return a.target&&(w.target=a.target),w})),d=o("template",{class:"project-detail"}),u=o("div",{class:"images"},(e.images||[]).map(a=>o("img",{src:a.src,alt:a.alt||""}))),f=o("div",{class:"skills"},(e.skills||[]).map(a=>o("span",{},a))),y=o("div",{class:"links"},(e.links||[]).map(a=>o("a",{href:a.href||"#",title:a.title||a.label||""},a.label||"Link"))),A=o("div",{class:"info"},[o("h3",{},e.title||"Project"),o("time",{},e.time||""),o("p",{},e.description||""),f,y]),x=o("div",{class:"detail"},[u,A]);return d.content.appendChild(x),s.append(i,m,h,b,d),s}static applyWidgetStyles(e,s){s&&Object.entries(s).forEach(([t,i])=>e.style.setProperty(t,i))}static renderGallery(e,s){(s||[]).forEach(t=>e.appendChild(g.cardFromProject(t)))}static async loadAndRender(e,s){const t=await C(s),i=Array.isArray(t)?t:t.projects||[],n=t.styles||t.widgetStyles||null;g.applyWidgetStyles(e,n||void 0),g.renderGallery(e,i)}static initAuto(){const e=document.getElementById("project-gallery-json");e&&g.loadAndRender(e,"data/projects.json"),document.querySelectorAll("[data-projects-src]").forEach(s=>{const t=s.getAttribute("data-projects-src");t&&g.loadAndRender(s,t)})}}function E(r){if(r)for(;r.firstChild;)r.removeChild(r.firstChild)}class j{constructor(e){this.modal=e,this.init()}currentIndex=0;images=[];lastFocus=null;get els(){return{dlg:this.modal.querySelector(".modal__dialog"),titleEl:this.modal.querySelector("#project-modal-title"),timeEl:this.modal.querySelector(".modal__time"),descEl:this.modal.querySelector(".modal__desc"),skillsEl:this.modal.querySelector(".modal__skills"),linksEl:this.modal.querySelector(".modal__links"),track:this.modal.querySelector(".gallery__track"),prevBtn:this.modal.querySelector(".gallery__prev"),nextBtn:this.modal.querySelector(".gallery__next"),closeBtn:this.modal.querySelector(".modal__close")}}setGallery(e){if(!this.images.length)return;this.currentIndex=Math.max(0,Math.min(e,this.images.length-1));const s=-this.currentIndex*100;this.els.track.style.transform=`translateX(${s}%)`;const t=this.images.length>1?"visible":"hidden";this.els.prevBtn.style.visibility=t,this.els.nextBtn.style.visibility=t}fillFromData(e){const{titleEl:s,timeEl:t,descEl:i,skillsEl:n,linksEl:l,track:p}=this.els;s.textContent=e.title||"Project",t.textContent=e.time||"",i.textContent=e.description||"",E(n),(e.skills||[]).forEach(c=>{const m=document.createElement("div");m.className="item",m.textContent=c,n.appendChild(m)}),E(l),(e.links||[]).forEach(c=>{const m=document.createElement("a");if(m.className="link",m.href=c.href||"#",m.title=c.title||c.label||"",c.target&&(m.target=c.target),c.icon){const h=document.createElement("img");h.src=c.icon,h.alt=c.label||"",h.setAttribute("draggable","false"),m.appendChild(h)}m.appendChild(document.createTextNode(" "+(c.label||"Link"))),l.appendChild(m)}),this.images=[],E(p),(e.images||[]).forEach(({src:c,alt:m})=>{if(!c)return;const h=document.createElement("img");h.className="gallery__img",h.loading="lazy",h.src=c,h.alt=m||"",p.appendChild(h),this.images.push({src:c,alt:m})}),this.setGallery(0)}openFromCard(e){const{titleEl:s,timeEl:t,descEl:i,skillsEl:n,linksEl:l,track:p}=this.els,c=e.querySelector(".description h3"),m=e.querySelector(".description time"),h=e.querySelector(".description p");if(s.textContent=c?(c.textContent||"").trim():"Project",t.textContent=m?(m.textContent||"").trim():"",h){const d=h.cloneNode(!0);d.querySelectorAll("a").forEach(u=>u.remove()),i.textContent=(d.textContent||"").trim()}else i.textContent="";E(n),e.querySelectorAll(".skill-list .item").forEach(d=>{const u=document.createElement("div");u.className="item",u.textContent=(d.textContent||"").trim(),n.appendChild(u)}),E(l),e.querySelectorAll(".card-footer a").forEach(d=>{const u=document.createElement("a");u.className="link",u.href=d.getAttribute("href")||"#",u.title=d.getAttribute("title")||"",u.target=d.target||"";const f=d.querySelector("img");if(f){const y=document.createElement("img");y.src=f.getAttribute("src")||"",y.alt=f.getAttribute("alt")||"",y.setAttribute("draggable","false"),u.appendChild(y)}u.appendChild(document.createTextNode(" "+(d.textContent||"").trim())),l.appendChild(u)}),this.images=[],E(p);const b=e.querySelector("template.project-detail");if(b&&b.content.cloneNode(!0).querySelectorAll("img").forEach(f=>{this.images.push({src:f.getAttribute("src")||"",alt:f.getAttribute("alt")||""})}),!this.images.length){const d=e.querySelector("img");d&&this.images.push({src:d.getAttribute("src")||"",alt:d.getAttribute("alt")||""})}this.images.forEach(({src:d,alt:u})=>{const f=document.createElement("img");f.className="gallery__img",f.loading="lazy",f.src=d,f.alt=u||"",p.appendChild(f)}),this.setGallery(0),this.lastFocus=document.activeElement,document.body.classList.add("modal-open"),this.modal.hidden=!1,this.modal.setAttribute("aria-hidden","false"),this.els.closeBtn.focus()}open(e){this.fillFromData(e||{}),this.lastFocus=document.activeElement,document.body.classList.add("modal-open"),this.modal.hidden=!1,this.modal.setAttribute("aria-hidden","false"),this.els.closeBtn.focus()}close(){this.modal.hidden=!0,this.modal.setAttribute("aria-hidden","true"),document.body.classList.remove("modal-open");const e=this.lastFocus;e&&typeof e.focus=="function"&&e.focus()}init(){const{prevBtn:e,nextBtn:s,closeBtn:t}=this.els;e?.addEventListener("click",()=>this.setGallery(this.currentIndex-1)),s?.addEventListener("click",()=>this.setGallery(this.currentIndex+1)),t?.addEventListener("click",()=>this.close()),this.modal.addEventListener("click",i=>{i.target===this.modal&&this.close()}),document.addEventListener("keydown",i=>{this.modal.hidden||(i.key==="Escape"&&this.close(),i.key==="ArrowLeft"&&this.setGallery(this.currentIndex-1),i.key==="ArrowRight"&&this.setGallery(this.currentIndex+1))}),document.addEventListener("click",i=>{const n=i.target,l=n&&n.closest("a.details-trigger");if(l){i.preventDefault();const p=l.closest(".project-card");p&&this.openFromCard(p)}})}}function q(){const r=Array.from(document.querySelectorAll(".section"));if(!r.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){r.forEach(s=>s.classList.add("in-view"));return}if("IntersectionObserver"in window){const s=new IntersectionObserver(t=>{t.forEach(i=>{i.isIntersecting&&i.intersectionRatio>.15?i.target.classList.add("in-view"):i.target.classList.remove("in-view")})},{threshold:[0,.15,.4,.75]});r.forEach(t=>s.observe(t))}else{const s=()=>{const t=window.innerHeight||document.documentElement.clientHeight;r.forEach(i=>{const n=i.getBoundingClientRect(),l=n.top<t*.85&&n.bottom>t*.15;i.classList.toggle("in-view",l)})};window.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",s),s()}}k(async()=>{const r=document.getElementById("y");r&&(r.textContent=String(new Date().getFullYear())),q();const e=document.getElementById("app-main");if(e){const t=e.getAttribute("data-sections-src")||"data/sections.json";await new L(e,t).load()}g.initAuto();const s=document.getElementById("project-modal");if(s){const t=new j(s);window.ProjectModal={open:i=>t.open(i)}}});
